# –ó–≤—ñ—Ç –ø–æ –∞–Ω–∞–ª—ñ–∑—É —Å–∏—Å—Ç–µ–º–∏ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó —Ö—ñ—Ç–º–∞–ø

## –°—Ç–∞—Ç—É—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è: ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û

### –©–æ –±—É–ª–æ –∑—Ä–æ–±–ª–µ–Ω–æ

1. **‚úÖ R —Å–∫—Ä–∏–ø—Ç —Å—Ç–≤–æ—Ä–µ–Ω–æ —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ**
   - –§–∞–π–ª: `analysis/heatmaps/generate_heatmaps.R`
   - –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å: –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ö—ñ—Ç–º–∞–ø –∑ CSV –¥–∞–Ω–∏—Ö
   - –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –≤—Å—ñ—Ö —Ç–∏–ø—ñ–≤ —Ñ—ñ–≥—É—Ä (pawn, knight, bishop, rook, queen, king)

2. **‚úÖ Python fallback –ø—Ä–∞—Ü—é—î**
   - –§–∞–π–ª: `analysis/heatmaps/generate_heatmaps_python.py`
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–Ω—è –∫–æ–ª–∏ R –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π
   - –ü–æ–≤–Ω–∞ —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å –∑ R —Å–∫—Ä–∏–ø—Ç–æ–º

3. **‚úÖ –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Python –∫–æ–¥–æ–º**
   - –§–∞–π–ª: `utils/integration.py`
   - –§—É–Ω–∫—Ü—ñ—è `generate_heatmaps()` –ø—Ä–∞—Ü—é—î –∫–æ—Ä–µ–∫—Ç–Ω–æ
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π fallback R ‚Üí Python

4. **‚úÖ –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è —Å—Ç–≤–æ—Ä–µ–Ω–∞**
   - –§–∞–π–ª: `visualize_heatmap_matplotlib.py`
   - –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è PNG –∑–æ–±—Ä–∞–∂–µ–Ω—å —Ö—ñ—Ç–º–∞–ø
   - –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —ñ–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω–∏—Ö —Ç–∞ –∫–æ–º–±—ñ–Ω–æ–≤–∞–Ω–∏—Ö —Ö—ñ—Ç–º–∞–ø

5. **‚úÖ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ–π–¥–µ–Ω–æ**
   - –í—Å—ñ —Ç–µ—Å—Ç–∏ –ø—Ä–æ–π—à–ª–∏ —É—Å–ø—ñ—à–Ω–æ
   - –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞—Ü—é—î –≤—ñ–¥ FEN –¥–æ –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—ó

## –î–µ—Ç–∞–ª—å–Ω–∏–π –∞–Ω–∞–ª—ñ–∑

### R —Å–∫—Ä–∏–ø—Ç (`generate_heatmaps.R`)

**–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å:**
- –ß–∏—Ç–∞—î CSV —Ñ–∞–π–ª–∏ –∑ –¥–∞–Ω–∏–º–∏ –ø—Ä–æ –ø–æ–∑–∏—Ü—ñ—ó —Ñ—ñ–≥—É—Ä
- –ö–æ–Ω–≤–µ—Ä—Ç—É—î —à–∞—Ö–æ–≤—ñ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ (e4, d5) –≤ –º–∞—Ç—Ä–∏—á–Ω—ñ —ñ–Ω–¥–µ–∫—Å–∏
- –°—Ç–≤–æ—Ä—é—î 8x8 –º–∞—Ç—Ä–∏—Ü—ñ –¥–ª—è –∫–æ–∂–Ω–æ—ó —Ñ—ñ–≥—É—Ä–∏
- –ó–±–µ—Ä—ñ–≥–∞—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –≤ JSON —Ñ–æ—Ä–º–∞—Ç—ñ

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
- –ï—Ñ–µ–∫—Ç–∏–≤–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –≤–µ–ª–∏–∫–∏—Ö –¥–∞–Ω–∏—Ö
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç –≤–∏–≤–æ–¥—É
- –î–æ–±—Ä–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤–∞–Ω–∏–π –∫–æ–¥

**–û–±–º–µ–∂–µ–Ω–Ω—è:**
- –ü–æ—Ç—Ä–µ–±—É—î –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è R
- –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ: jsonlite, dplyr

### Python fallback (`generate_heatmaps_python.py`)

**–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å:**
- –ü–æ–≤–Ω–∞ —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å –∑ R —Å–∫—Ä–∏–ø—Ç–æ–º
- –¢–æ–π —Å–∞–º–∏–π —Ñ–æ—Ä–º–∞—Ç –≤–≤–æ–¥—É/–≤–∏–≤–æ–¥—É
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–Ω—è

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
- –ù–µ –ø–æ—Ç—Ä–µ–±—É—î –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
- –®–≤–∏–¥–∫–∏–π –∑–∞–ø—É—Å–∫
- –õ–µ–≥–∫–æ –Ω–∞–ª–∞–≥–æ–¥–∂—É–≤–∞—Ç–∏

### –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è (`utils/integration.py`)

**–õ–æ–≥—ñ–∫–∞ fallback:**
1. –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ R —Å–∫—Ä–∏–ø—Ç
2. –Ø–∫—â–æ R –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π ‚Üí Python —Å–∫—Ä–∏–ø—Ç
3. –Ø–∫—â–æ Python –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π ‚Üí –ø–æ–º–∏–ª–∫–∞

**API:**
```python
generate_heatmaps(fens, out_dir, pattern_set, use_wolfram)
```

### –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è (`visualize_heatmap_matplotlib.py`)

**–ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ:**
- –Ü–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω—ñ —Ö—ñ—Ç–º–∞–ø–∏ –¥–ª—è –∫–æ–∂–Ω–æ—ó —Ñ—ñ–≥—É—Ä–∏
- –ö–æ–º–±—ñ–Ω–æ–≤–∞–Ω–∞ —Ö—ñ—Ç–º–∞–ø–∞ –≤—Å—ñ—Ö —Ñ—ñ–≥—É—Ä
- Subplot –∑ —É—Å—ñ–º–∞ —Ñ—ñ–≥—É—Ä–∞–º–∏
- –í–∏—Å–æ–∫–æ—è–∫—ñ—Å–Ω—ñ PNG –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è

## –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –¢–µ—Å—Ç 1: –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ö—ñ—Ç–º–∞–ø
- ‚úÖ 6 FEN –ø–æ–∑–∏—Ü—ñ–π –æ–±—Ä–æ–±–ª–µ–Ω–æ
- ‚úÖ 6 —Ç–∏–ø—ñ–≤ —Ñ—ñ–≥—É—Ä –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ
- ‚úÖ –ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ö–æ–¥—ñ–≤: 196

### –¢–µ—Å—Ç 2: –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è
- ‚úÖ 8 PNG —Ñ–∞–π–ª—ñ–≤ —Å—Ç–≤–æ—Ä–µ–Ω–æ
- ‚úÖ –í—Å—ñ —Ç–∏–ø–∏ —Ñ—ñ–≥—É—Ä –≤—ñ–∑—É–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ –ö–æ–º–±—ñ–Ω–æ–≤–∞–Ω–∞ —Ö—ñ—Ç–º–∞–ø–∞ —Å—Ç–≤–æ—Ä–µ–Ω–∞

### –¢–µ—Å—Ç 3: PGN —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è
- ‚úÖ –§—É–Ω–∫—Ü—ñ—è –ø—Ä–∞—Ü—é—î (–Ω–µ–º–∞—î PGN —Ñ–∞–π–ª—ñ–≤ –¥–ª—è —Ç–µ—Å—Ç—É)

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–∏—Ö

### –í—Ö—ñ–¥ (FEN ‚Üí CSV)
```
fen_id,piece,to
0,pawn,e4
0,knight,f3
0,bishop,c4
```

### –í–∏—Ö—ñ–¥ (JSON —Ö—ñ—Ç–º–∞–ø–∏)
```json
[
  [0, 0, 0, 0, 0, 0, 0, 0],  // –†—è–¥–æ–∫ 8
  [0, 0, 0, 0, 0, 0, 0, 0],  // –†—è–¥–æ–∫ 7
  [0, 0, 0, 0, 0, 0, 0, 0],  // –†—è–¥–æ–∫ 6
  [0, 0, 0, 0, 0, 0, 0, 0],  // –†—è–¥–æ–∫ 5
  [0, 0, 0, 0, 0, 0, 0, 0],  // –†—è–¥–æ–∫ 4
  [0, 0, 0, 0, 0, 0, 0, 0],  // –†—è–¥–æ–∫ 3
  [0, 0, 0, 0, 0, 0, 0, 0],  // –†—è–¥–æ–∫ 2
  [0, 0, 0, 0, 0, 0, 0, 0]   // –†—è–¥–æ–∫ 1
]
```

## –í–∏—Å–Ω–æ–≤–∫–∏

### ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞—Ü—é—î –ø–æ–≤–Ω—ñ—Å—Ç—é
1. **R —Å–∫—Ä–∏–ø—Ç** —Å—Ç–≤–æ—Ä–µ–Ω–æ —Ç–∞ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω—É—î
2. **Python fallback** –ø—Ä–∞—Ü—é—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
3. **–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è** –∑ Python –∫–æ–¥–æ–º –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∞
4. **–í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è** —Å—Ç–≤–æ—Ä–µ–Ω–∞ —Ç–∞ –ø—Ä–∞—Ü—é—î
5. **–î–∞–Ω—ñ** –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–µ—Ä–µ–¥–∞—é—Ç—å—Å—è –º—ñ–∂ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏

### üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–Ω—è
- R –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π ‚Üí Python fallback
- –í—Å—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –ø—Ä–∞—Ü—é—é—Ç—å –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ R

### üìä –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è
- –•—ñ—Ç–º–∞–ø–∏ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è –Ω–∞ —à–∞—Ö–æ–≤—ñ–π –¥–æ—à—Ü—ñ
- –ö–æ–ª—å–æ—Ä–æ–≤–µ –∫–æ–¥—É–≤–∞–Ω–Ω—è —ñ–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—ñ
- –ú–Ω–æ–∂–∏–Ω–Ω—ñ —Ñ–æ—Ä–º–∞—Ç–∏ –≤–∏–≤–æ–¥—É

### üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è
- –í—Å—ñ —Ç–µ—Å—Ç–∏ –ø—Ä–æ–π—à–ª–∏ —É—Å–ø—ñ—à–Ω–æ
- –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

1. **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è**: –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—ñ
2. **R –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è**: –û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–µ, Python fallback –¥–æ—Å—Ç–∞—Ç–Ω—ñ–π
3. **–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥**: –õ–æ–≥–∏ –ø–æ–∫–∞–∑—É—é—Ç—å —è–∫–∏–π —Å–∫—Ä–∏–ø—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è
4. **–†–æ–∑—à–∏—Ä–µ–Ω–Ω—è**: –õ–µ–≥–∫–æ –¥–æ–¥–∞—Ç–∏ –Ω–æ–≤—ñ —Ç–∏–ø–∏ –∞–Ω–∞–ª—ñ–∑—É

## –§–∞–π–ª–∏ —Å—Ç–≤–æ—Ä–µ–Ω—ñ/–ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω—ñ

- ‚úÖ `analysis/heatmaps/generate_heatmaps.R` - R —Å–∫—Ä–∏–ø—Ç
- ‚úÖ `analysis/heatmaps/generate_heatmaps_python.py` - Python fallback
- ‚úÖ `utils/integration.py` - —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è
- ‚úÖ `visualize_heatmap_matplotlib.py` - –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è
- ‚úÖ `test_heatmap_integration.py` - —Ç–µ—Å—Ç–∏
- ‚úÖ `HEATMAP_README.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
- ‚úÖ `HEATMAP_ANALYSIS_REPORT.md` - —Ü–µ–π –∑–≤—ñ—Ç