# –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è PySide Viewer –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ —Ö—ñ—Ç–º–∞–ø–∞–º–∏

## –û–≥–ª—è–¥ –∑–º—ñ–Ω

–ë—É–ª–æ –≤–Ω–µ—Å–µ–Ω–æ –Ω–∞—Å—Ç—É–ø–Ω—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è –¥–æ `pyside_viewer.py` –¥–ª—è –∫—Ä–∞—â–æ—ó —Ä–æ–±–æ—Ç–∏ –∑ —Ö—ñ—Ç–º–∞–ø–∞–º–∏ —Ç–∞ —Ç–∞–π–º—ñ–Ω–≥–æ–º —Ö–æ–¥—ñ–≤:

## üî• 1. –ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —Ö—ñ—Ç–º–∞–ø—ñ–≤

### –î–æ–¥–∞–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó:
- `_count_heatmaps()` - –ø—ñ–¥—Ä–∞—Ö–æ–≤—É—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ö—ñ—Ç–º–∞–ø—ñ–≤ –ø–æ —Ñ—ñ–≥—É—Ä–∞–º —Ç–∞ –∑–∞–≥–∞–ª—å–Ω–æ
- `_update_heatmap_stats()` - –æ–Ω–æ–≤–ª—é—î —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ö—ñ—Ç–º–∞–ø—ñ–≤ —É UI

### –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è:
```python
def _count_heatmaps(self):
    """–ü—ñ–¥—Ä–∞—Ö—É–≤–∞—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ö—ñ—Ç–º–∞–ø—ñ–≤ –ø–æ —Ñ—ñ–≥—É—Ä–∞–º —Ç–∞ –∑–∞–≥–∞–ª—å–Ω–æ."""
    piece_counts = {}
    total_heatmaps = 0
    
    for piece_name, heatmap_data in self.drawer_manager.heatmaps.items():
        if isinstance(heatmap_data, list) and len(heatmap_data) > 0:
            if isinstance(heatmap_data[0], list) and len(heatmap_data) == 8:
                piece_counts[piece_name] = 1
                total_heatmaps += 1
            else:
                piece_counts[piece_name] = len(heatmap_data)
                total_heatmaps += len(heatmap_data)
        else:
            piece_counts[piece_name] = 0
    
    return piece_counts, total_heatmaps
```

## ‚è±Ô∏è 2. –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π —á–∞—Å —Ö–æ–¥—É (400–º—Å)

### –î–æ–¥–∞–Ω—ñ –∑–º—ñ–Ω–Ω—ñ:
- `self.min_move_time = 400` - –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π —á–∞—Å —Ö–æ–¥—É –≤ –º—ñ–ª—ñ—Å–µ–∫—É–Ω–¥–∞—Ö
- `self.move_start_time = 0` - —á–∞—Å –ø–æ—á–∞—Ç–∫—É —Ö–æ–¥—É

### –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è:
```python
def auto_step(self):
    # –ó–∞–ø–∞–º'—è—Ç–æ–≤—É—î–º–æ —á–∞—Å –ø–æ—á–∞—Ç–∫—É —Ö–æ–¥—É
    import time
    self.move_start_time = time.time()
    
    # ... –ª–æ–≥—ñ–∫–∞ —Ö–æ–¥—É ...
    
    # –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ –ø—Ä–æ–π—à–æ–≤ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π —á–∞—Å
    elapsed_time = (time.time() - self.move_start_time) * 1000
    if elapsed_time < self.min_move_time:
        remaining_time = self.min_move_time - elapsed_time
        QTimer.singleShot(int(remaining_time), self._continue_after_timing)
        return
```

## üéØ 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ö—ñ—Ç–º–∞–ø—ñ–≤

### –î–æ–¥–∞–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó:
- `_load_heatmap_for_piece(move)` - –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î —Ö—ñ—Ç–º–∞–ø –¥–ª—è —Ñ—ñ–≥—É—Ä–∏, —è–∫–∞ —Ä–æ–±–∏—Ç—å —Ö—ñ–¥
- `_continue_after_timing()` - –ø—Ä–æ–¥–æ–≤–∂—É—î –ø—ñ—Å–ª—è –º—ñ–Ω—ñ–º–∞–ª—å–Ω–æ–≥–æ —á–∞—Å—É

### –õ–æ–≥—ñ–∫–∞ —Ä–æ–±–æ—Ç–∏:
1. –§—ñ–≥—É—Ä–∞ —Ä–æ–±–∏—Ç—å —Ö—ñ–¥
2. –í–∏–∑–Ω–∞—á–∞—î—Ç—å—Å—è —Ç–∏–ø —Ñ—ñ–≥—É—Ä–∏ (pawn, knight, bishop, rook, queen, king)
3. –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–π —Ö—ñ—Ç–º–∞–ø
4. –•—ñ—Ç–º–∞–ø –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è –Ω–∞ –¥–æ—à—Ü—ñ
5. –•—ñ–¥ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è –∑ –∞–Ω—ñ–º–∞—Ü—ñ—î—é

### –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è:
```python
def _load_heatmap_for_piece(self, move):
    """–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ö—ñ—Ç–º–∞–ø –¥–ª—è —Ñ—ñ–≥—É—Ä–∏, —è–∫–∞ —Ä–æ–±–∏—Ç—å —Ö—ñ–¥."""
    piece = self.board.piece_at(move.from_square)
    if piece is None:
        return
    
    piece_type = piece.piece_type
    piece_name = None
    
    if piece_type == chess.PAWN:
        piece_name = "pawn"
    elif piece_type == chess.KNIGHT:
        piece_name = "knight"
    # ... —ñ–Ω—à—ñ —Ñ—ñ–≥—É—Ä–∏ ...
    
    if piece_name and piece_name in self.drawer_manager.heatmaps:
        self.drawer_manager.active_heatmap_piece = piece_name
        self._update_heatmap_stats()
```

## üé® 4. –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è UI

### –î–æ–¥–∞–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏:
- `self.heatmap_stats_label` - –≤—ñ–¥–∂–µ—Ç –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ö—ñ—Ç–º–∞–ø—ñ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø—Ä–∏ –∑–º—ñ–Ω—ñ —Ö—ñ—Ç–º–∞–ø—ñ–≤

### –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:
```
üî• Heatmap Statistics
Total heatmaps: 3
By piece type:
  ‚Ä¢ heatmap_knight: 1
  ‚Ä¢ heatmap_pawn: 1
  ‚Ä¢ heatmap_queen: 1

Active: heatmap_pawn
```

## üìä 5. –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ö—ñ—Ç–º–∞–ø—ñ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è –≤ –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö –≤–∏–ø–∞–¥–∫–∞—Ö:
- –ü—Ä–∏ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó viewer
- –ü—Ä–∏ –∑–º—ñ–Ω—ñ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ö—ñ—Ç–º–∞–ø—É
- –ü—Ä–∏ –∑–º—ñ–Ω—ñ –Ω–∞–±–æ—Ä—É —Ö—ñ—Ç–º–∞–ø—ñ–≤
- –ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –Ω–æ–≤–∏—Ö —Ö—ñ—Ç–º–∞–ø—ñ–≤
- –ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ñ –≥—Ä–∏

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–°—Ç–≤–æ—Ä–µ–Ω–æ —Ç–µ—Å—Ç–æ–≤—ñ —Å–∫—Ä–∏–ø—Ç–∏:
- `test_heatmap_features.py` - —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ
- `demo_heatmap_features.py` - –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è –º–æ–∂–ª–∏–≤–æ—Å—Ç–µ–π

### –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:
```
üìä –†–µ–∑—É–ª—å—Ç–∞—Ç–∏: 3/3 —Ç–µ—Å—Ç—ñ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ
üéâ –í—Å—ñ —Ç–µ—Å—Ç–∏ –ø—Ä–æ–π–¥–µ–Ω–æ —É—Å–ø—ñ—à–Ω–æ!
```

## üöÄ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

1. **–ó–∞–ø—É—Å–∫ viewer:**
   ```bash
   python3 pyside_viewer.py
   ```

2. **–ü–µ—Ä–µ–≥–ª—è–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ö—ñ—Ç–º–∞–ø—ñ–≤:**
   - –í—ñ–¥–∫—Ä–∏–π—Ç–µ –≤–∫–ª–∞–¥–∫—É "üî• Heatmaps"
   - –ü–µ—Ä–µ–≥–ª—è–¥–∞–π—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤–≥–æ—Ä—ñ –≤–∫–ª–∞–¥–∫–∏

3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –≥—Ä–∞:**
   - –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "‚ñ∂ –ê–≤—Ç–æ" –¥–ª—è –ø–æ—á–∞—Ç–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—ó –≥—Ä–∏
   - –ö–æ–∂–µ–Ω —Ö—ñ–¥ –±—É–¥–µ –º–∞—Ç–∏ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π —á–∞—Å 400–º—Å
   - –•—ñ—Ç–º–∞–ø–∏ –±—É–¥—É—Ç—å –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ

## üìù –ü—Ä–∏–º—ñ—Ç–∫–∏

- –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π —á–∞—Å —Ö–æ–¥—É –∑–∞–±–µ–∑–ø–µ—á—É—î –ø–ª–∞–≤–Ω—É –∞–Ω—ñ–º–∞—Ü—ñ—é
- –•—ñ—Ç–º–∞–ø–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ –≤–æ–Ω–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ
- –í—Å—ñ –∑–º—ñ–Ω–∏ —Å—É–º—ñ—Å–Ω—ñ –∑ —ñ—Å–Ω—É—é—á–æ—é —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—é

## üîß –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è `QTimer.singleShot()` –¥–ª—è –∑–∞—Ç—Ä–∏–º–∫–∏
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ `QLabel` –∑ HTML —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è–º
- –•—ñ—Ç–º–∞–ø–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è —á–µ—Ä–µ–∑ `DrawerManager`
- –í—Å—ñ –∑–º—ñ–Ω–∏ —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω—ñ –≤ —ñ—Å–Ω—É—é—á–∏–π –∫–æ–¥ –±–µ–∑ –ø–æ—Ä—É—à–µ–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ