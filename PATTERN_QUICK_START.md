# –ë—ã—Å—Ç—Ä—ã–π –°—Ç–∞—Ä—Ç - –°–∏—Å—Ç–µ–º–∞ –ü–∞—Ç—Ç–µ—Ä–Ω–æ–≤

## –ó–∞–ø—É—Å–∫ PySide Viewer —Å –ü–∞—Ç—Ç–µ—Ä–Ω–∞–º–∏

```bash
python pyside_viewer.py
```

–¢–µ–ø–µ—Ä—å –≤ viewer –µ—Å—Ç—å:
- **üéØ –í–∫–ª–∞–¥–∫–∞ "–ü–∞—Ç—Ç–µ—Ä–Ω–∏"** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –≤–æ –≤—Ä–µ–º—è –∏–≥—Ä—ã
- **üîÑ –ö–Ω–æ–ø–∫–∞ "–†–µ—Å–µ—Ç"** - —Å–±—Ä–æ—Å–∏—Ç—å –∏–≥—Ä—É –∏ –Ω–∞—á–∞—Ç—å –Ω–æ–≤—É—é
- **‚ñ∂ –°—Ç–∞—Ä—Ç / ‚è∏ –°—Ç–æ–ø** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–π

## –ß—Ç–æ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –ü–∞—Ç—Ç–µ—Ä–Ω–∞—Ö

### –í JSON —Ñ–∞–π–ª–µ –ø–∞—Ç—Ç–µ—Ä–Ω–∞:

```json
{
  "pattern_id": "fork_20251026_123456",
  "fen": "–ø–æ–∑–∏—Ü–∏—è –¥–æ —Ö–æ–¥–∞",
  "triggering_move": "e2e4",
  "pattern_type": "fork",
  
  "participating_pieces": [
    {
      "square": "e4",
      "piece_type": "knight",
      "color": "white",
      "role": "moved",          // moved, attacker, defender, target, support
      "moved_in_pattern": true  // —Ö–æ–¥–∏–ª–∞ –ª–∏ —Ñ–∏–≥—É—Ä–∞
    }
  ],
  
  "exchange_sequence": {
    "moves": ["d6e4", "f3e4"],     // –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–±–º–µ–Ω–æ–≤
    "material_balance": 200,        // –ú–∞—Ç–µ—Ä–∏–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å
    "forced": true,                 // –§–æ—Ä—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–∞–∑–º–µ–Ω?
    "evaluation_change": 2.0        // –ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ü–µ–Ω–∫–∏
  },
  
  "metadata": {
    "move_number": 5,
    "turn": "white",
    "pieces_in_pattern": 2  // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∏–≥—É—Ä
  }
}
```

## –¢–æ–ª—å–∫–æ –£—á–∞—Å—Ç–≤—É—é—â–∏–µ –§–∏–≥—É—Ä—ã!

–°–∏—Å—Ç–µ–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç **–¢–û–õ–¨–ö–û** —Ñ–∏–≥—É—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ:
- ‚úÖ –°–¥–µ–ª–∞–ª–∏ —Ö–æ–¥
- ‚úÖ –ê—Ç–∞–∫—É—é—Ç —Ü–µ–ª—å
- ‚úÖ –ó–∞—â–∏—â–∞—é—Ç –ø–æ–∑–∏—Ü–∏—é
- ‚úÖ –Ø–≤–ª—è—é—Ç—Å—è —Ü–µ–ª—å—é –∞—Ç–∞–∫–∏
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –∫–æ–º–±–∏–Ω–∞—Ü–∏—é

–§–∏–≥—É—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ **–ù–ï —É—á–∞—Å—Ç–≤—É—é—Ç** –≤ –ø–∞—Ç—Ç–µ—Ä–Ω–µ - **–Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è**!

## –†–∞–∑–º–µ–Ω—ã (2-3 —Ö–æ–¥–∞ –≤–ø–µ—Ä–µ–¥)

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç:
- –§–æ—Ä—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–±–º–µ–Ω—ã
- –ú–∞—Ç–µ—Ä–∏–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å (+200 = –≤—ã–∏–≥—Ä—ã—à –ª—ë–≥–∫–æ–π —Ñ–∏–≥—É—Ä—ã)
- –£—á–∞—Å—Ç–≤—É—é—â–∏–µ –∫–ª–µ—Ç–∫–∏

–ü—Ä–∏–º–µ—Ä —Ä–∞–∑–º–µ–Ω–∞:
```
–•–æ–¥ 1: Nxe4 (–º—ã –±–µ—Ä—ë–º)
–•–æ–¥ 2: dxe4 (–ø—Ä–æ—Ç–∏–≤–Ω–∏–∫ –∑–∞–±–∏—Ä–∞–µ—Ç)
–†–µ–∑—É–ª—å—Ç–∞—Ç: +100 (–≤—ã–∏–≥—Ä–∞–ª–∏ –ø–µ—à–∫—É)
```

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ü–∞—Ç—Ç–µ—Ä–Ω–∞–º–∏

### –í UI (PySide Viewer):

1. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è:**
   - –ü–æ –±–æ—Ç—É (DynamicBot, StockfishBot, –í—Å–µ)
   - –ü–æ —Ç–∏–ø—É (fork, pin, exchange, –∏ —Ç.–¥.)

2. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
   - –í—Å–µ–≥–æ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
   - –° –æ–±–º–µ–Ω–∞–º–∏
   - –ü–æ —Ç–∏–ø–∞–º
   - –ü–æ –±–æ—Ç–∞–º

3. **–î–µ—Ç–∞–ª–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞:**
   - –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –ø–∞—Ç—Ç–µ—Ä–Ω –≤ —Å–ø–∏—Å–∫–µ
   - –£–≤–∏–¥–∏—Ç–µ –≤—Å–µ —É—á–∞—Å—Ç–≤—É—é—â–∏–µ —Ñ–∏–≥—É—Ä—ã
   - –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–±–º–µ–Ω–æ–≤ (–µ—Å–ª–∏ –µ—Å—Ç—å)

### –í –∫–æ–¥–µ:

```python
from chess_ai.pattern_manager import PatternManager

manager = PatternManager()

# –í–∫–ª—é—á–∏—Ç—å —Ç–æ–ª—å–∫–æ —Ç–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
manager.set_enabled_types(["fork", "pin", "exchange"])

# –ù–∞–π—Ç–∏ –≤—Å–µ –≤–∏–ª–∫–∏
forks = manager.search_patterns(pattern_types=["fork"])

# –≠–∫—Å–ø–æ—Ä—Ç –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
manager.export_patterns("my_patterns.json", pattern_ids=forks)
```

## –£–ª—É—á—à–µ–Ω–Ω—ã–π DynamicBot

–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —É–ª—É—á—à–µ–Ω–Ω–æ–≥–æ –±–æ—Ç–∞ —Å –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º–∏:

```python
from chess_ai.enhanced_dynamic_bot import EnhancedDynamicBot
import chess

# –°–æ–∑–¥–∞—Ç—å —É–ª—É—á—à–µ–Ω–Ω–æ–≥–æ –±–æ—Ç–∞
bot = EnhancedDynamicBot(chess.WHITE, use_patterns=True)

# –í—ã–±—Ä–∞—Ç—å —Ö–æ–¥
board = chess.Board()
move, reason = bot.choose_move(board, debug=True)

print(f"Move: {move}")
print(f"Reason: {reason}")

# –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –ø–∞—Ç—Ç–µ—Ä–Ω, reason –±—É–¥–µ—Ç:
# "PATTERN[fork] | Forced exchange: +200"
```

## –¢–∏–ø—ã –ü–∞—Ç—Ç–µ—Ä–Ω–æ–≤

- **fork** - –í–∏–ª–∫–∞ (–∞—Ç–∞–∫–∞ 2+ —Ñ–∏–≥—É—Ä)
- **pin** - –°–≤—è–∑–∫–∞
- **skewer** - –†–µ–Ω—Ç–≥–µ–Ω
- **exchange** - –†–∞–∑–º–µ–Ω
- **capture** - –í–∑—è—Ç–∏–µ
- **check** - –®–∞—Ö
- **discovered_attack** - –í—Å–∫—Ä—ã—Ç–∞—è –∞—Ç–∞–∫–∞
- **centralization** - –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è

## –°–æ–∑–¥–∞–Ω–∏–µ –°–≤–æ–∏—Ö –ü–∞—Ç—Ç–µ—Ä–Ω–æ–≤

```python
from chess_ai.pattern_manager import PatternManager

manager = PatternManager()

# –°–æ–∑–¥–∞—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω –≤—Ä—É—á–Ω—É—é
pattern = manager.create_pattern_from_game(
    fen="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",
    move_uci="e2e4",
    pattern_type="opening",
    description="–ú–æ–π –ª—é–±–∏–º—ã–π –¥–µ–±—é—Ç",
    participating_pieces=[
        {
            "square": "e4",
            "piece_type": "pawn",
            "color": "white",
            "role": "moved",
            "moved_in_pattern": True
        }
    ]
)

if pattern:
    print(f"–°–æ–∑–¥–∞–Ω –ø–∞—Ç—Ç–µ—Ä–Ω: {pattern.pattern_id}")
```

## –ì–¥–µ –•—Ä–∞–Ω—è—Ç—Å—è –ü–∞—Ç—Ç–µ—Ä–Ω—ã

```
patterns/
  detected/          # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
    config.json      # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã
    fork_*.json      # –ü–∞—Ç—Ç–µ—Ä–Ω—ã –≤–∏–ª–æ–∫
    pin_*.json       # –ü–∞—Ç—Ç–µ—Ä–Ω—ã —Å–≤—è–∑–æ–∫
    exchange_*.json  # –ü–∞—Ç—Ç–µ—Ä–Ω—ã –æ–±–º–µ–Ω–æ–≤
    ...
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏

–§–∞–π–ª `patterns/detected/config.json`:

```json
{
  "enabled_types": ["fork", "pin", "exchange", "capture", "check"],
  "min_confidence": 0.5,
  "prefer_exchanges": true,
  "max_patterns_per_position": 3
}
```

–ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

```python
manager = PatternManager()
manager.config.min_confidence = 0.7  # –ü–æ–≤—ã—Å–∏—Ç—å –ø–æ—Ä–æ–≥
manager.save_config()
```

## –ë–æ—Ä—å–±–∞ —Å Stockfish

–î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:

1. **–í–∫–ª—é—á–∏—Ç–µ debug —Ä–µ–∂–∏–º** - –≤–∏–¥–Ω–æ –ø—Ä–∏—á–∏–Ω—ã —Ö–æ–¥–æ–≤
2. **–ò–≥—Ä–∞–π—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–∞—Ä—Ç–∏–π** - —Å–æ–±–µ—Ä–∏—Ç–µ –±–∞–∑—É –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
3. **–§–∏–ª—å—Ç—Ä—É–π—Ç–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã** - –æ—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–ª—å–∫–æ —É—Å–ø–µ—à–Ω—ã–µ
4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ EnhancedDynamicBot** –≤–º–µ—Å—Ç–æ –æ–±—ã—á–Ω–æ–≥–æ DynamicBot

## –ì–æ—Ä—è—á–∏–µ –ö–ª–∞–≤–∏—à–∏ –≤ Viewer

- **–†–µ—Å–µ—Ç** - –°–±—Ä–æ—Å –∏–≥—Ä—ã
- **–°—Ç–∞—Ä—Ç** - –ù–∞—á–∞—Ç—å/–ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å
- **–°—Ç–æ–ø** - –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
- **Debug** (checkbox) - –î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏

## –û—Ç–ª–∞–¥–∫–∞

–ï—Å–ª–∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –Ω–µ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—é—Ç—Å—è:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ debug –≤–∫–ª—é—á–µ–Ω
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `patterns/detected/` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –≤–∫–ª—é—á–µ–Ω—ã –≤ config.json

## –ü–æ–ª–Ω–∞—è –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–º. `PATTERN_SYSTEM_README.md` –¥–ª—è –ø–æ–ª–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

## –ü—Ä–∏–º–µ—Ä—ã

### –ü—Ä–∏–º–µ—Ä 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ

–ü—Ä–æ—Å—Ç–æ –∏–≥—Ä–∞–π—Ç–µ! –ü–∞—Ç—Ç–µ—Ä–Ω—ã –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –Ω–∞ –≤–∫–ª–∞–¥–∫–µ üéØ –ü–∞—Ç—Ç–µ—Ä–Ω–∏.

### –ü—Ä–∏–º–µ—Ä 2: –≠–∫—Å–ø–æ—Ä—Ç –õ—É—á—à–∏—Ö –ü–∞—Ç—Ç–µ—Ä–Ω–æ–≤

```python
from chess_ai.pattern_manager import PatternManager

manager = PatternManager()

# –ù–∞–π—Ç–∏ –≤—Å–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã —Å –≤—ã–≥–æ–¥–Ω—ã–º–∏ –æ–±–º–µ–Ω–∞–º–∏
good_exchanges = manager.search_patterns(
    has_exchange=True
)

# –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å
manager.export_patterns("best_patterns.json", pattern_ids=good_exchanges)
```

### –ü—Ä–∏–º–µ—Ä 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –ò–≥—Ä–µ

```python
from chess_ai.enhanced_dynamic_bot import EnhancedDynamicBot
import chess

bot = EnhancedDynamicBot(chess.WHITE)
board = chess.Board()

for _ in range(10):
    move, reason = bot.choose_move(board, debug=True)
    if move:
        print(f"{board.san(move)}: {reason}")
        board.push(move)
    
    # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    stats = bot.get_statistics()
    print(f"–ü–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ: {stats['patterns_used']}")
```

---

**–ì–æ—Ç–æ–≤–æ!** –°–∏—Å—Ç–µ–º–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `python pyside_viewer.py` –∏ –∏–≥—Ä–∞–π—Ç–µ!
